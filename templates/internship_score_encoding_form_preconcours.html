{% extends "bootstrap5/layout.html" %}
{% load selection_tags %}

{% load i18n %}
{% comment "License" %}
    * OSIS stands for Open Student Information System. It's an application
    * designed to manage the core business of higher education institutions,
    * such as universities, faculties, institutes and professional schools.
    * The core business involves the administration of students, teachers,
    * courses, programs and so on.
    *
    * Copyright (C) 2015-2022 Université catholique de Louvain (http://www.uclouvain.be)
    *
    * This program is free software: you can redistribute it and/or modify
    * it under the terms of the GNU General Public License as published by
    * the Free Software Foundation, either version 3 of the License, or
    * (at your option) any later version.
    *
    * This program is distributed in the hope that it will be useful,
    * but WITHOUT ANY WARRANTY; without even the implied warranty of
    * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    * GNU General Public License for more details.
    *
    * A copy of this license - GNU General Public License - is available
    * at the root of the source code of this program.  If not,
    * see http://www.gnu.org/licenses/.
{% endcomment %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'internship' %}">{% trans 'Internship' %}</a></li>
    <li class="breadcrumb-item"><a href="{% url 'internship_score_encoding'  %}">{% trans 'Score encoding' %}</a></li>
    <li class="breadcrumb-item">
        <a href="{% url 'internship_score_encoding_sheet' specialty_uuid=specialty.uuid organization_uuid=organization.uuid %}">
            {{ specialty.cohort.name }} - {{ specialty.name }}
        </a>
    </li>
    <li class="breadcrumb-item active">{{ student.last_name | upper }}, {{ student.first_name }}</li>
{% endblock %}

{% block content %}
    <div class="page-header">
        <h2>Formulaire d'évaluation (pré-concours)</h2>
    </div>

    {% include "template_messages.html" %}

    <div class="card">
        <div class="card-heading d-flex align-items-center justify-content-between p-4">
            <div class="d-flex justify-content-between align-items-center gap-4">
                <h2>{{ period.name }}</h2>
                <div>
                    <h5>{{ specialty.name }}</h5>
                    <h5>{{ organization.name }}</h5>
                    <h6>{{ specialty.cohort.name }}</h6>
                </div>
            </div>
            <h3>{{ student.last_name | upper }}, {{ student.first_name }}</h3>
        </div>
        <div class="card-body">
            <form id="score_encoding_form" method="post" class="form-inline">
                {% csrf_token %}
                <table class="table table-sm">
                    <thead>
                        <tr class="border-bottom-1 border-bottom">
                            <th colspan="4"><h6><b>{% trans 'COTATION - Cotez chaque item sur 20 points. Veuillez vous référer et respecter l\'échelle ci-dessous.' %}</b></h6></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                        <tr>
                            <td class="text-nowrap">18-19</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "EXCEPTIONNEL: est dans le 1% des meilleurs stagiaires" %}</td>
                            <td class="text-nowrap">12</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "BON avec plusieurs points faibles" %}</td>
                        </tr>
                        <tr>
                            <td class="text-nowrap">16-17</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "EXCELLENT: est dans les 10% des meilleurs stagiaires" %}</td>
                            <td class="text-nowrap">11</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "EN DESSOUS de la moyenne des stagiaires" %}</td>
                        </tr>
                        <tr>
                            <td class="text-nowrap">15</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "TRES BON: est dans les 30% des meilleurs stagiaires" %}</td>
                            <td class="text-nowrap">10</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "A fait preuve de manquements" %}</td>
                        </tr>
                        <tr>
                            <td class="text-nowrap">14</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "BON: la majorité des étudiants en stage se retrouvent normalement dans cette catégorie" %}</td>
                            <td class="text-nowrap">9</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "Manque d'intégration, absence non motivée, pas de sens des responsabilités" %}</td>
                        </tr>
                        <tr>
                            <td class="text-nowrap">13</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "BON avec l'un ou l'autre point faible" %}</td>
                            <td class="text-nowrap">5</td>
                            <td style="max-width: 200px; padding-right: 10px;">{% trans "Une absence non motivée de plus d'une semaine justifie une cote globale de 5" %}</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="mt-5">{% trans 'Competence Evaluation' %}</h3>
                <hr/>
                <div class="row">
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                            <label for="competence_1" class="form-label mb-0">CAPACITE DE RECUEIL DES DONNEES DE BASE</label>
                                <p class="form-text text-muted">anamnèse – examens cliniques – demandes relationnelles d'examens de labo et de RX – notes d'évolution</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="competence_1" name="competence_1" min="0" max="20" value="{{ score.preconcours_evaluation_detail.competence_1 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="competence_2" class="form-label mb-0">CONNAISSANCES MEDICALES</label>
                                <p class="form-text text-muted">mécanismes physiopathologiques – diagnostics différentiels – connaissances thérapeutiques</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="competence_2" name="competence_2" min="0" max="20" value="{{ score.preconcours_evaluation_detail.competence_2 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="competence_3" class="form-label mb-0">JUGEMENT CLINIQUE</label>
                                <p class="form-text text-muted">identification des problèmes du patient – identification des diagnostics les plus vraisemblables</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="competence_3" name="competence_3" min="0" max="20" value="{{ score.preconcours_evaluation_detail.competence_3 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="competence_4" class="form-label mb-0">HABILETE TECHNIQUE CLINIQUE</label>
                                <p class="form-text text-muted">manipulation d'instruments propres à votre spécialité</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="competence_4" name="competence_4" min="0" max="20" value="{{ score.preconcours_evaluation_detail.competence_4 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 bg-light  border-top border-bottom">
                    <div class="row align-items-center">
                        <div class="col-sm-10">
                            <label for="competency_score" class="form-label mb-0">COTE DE COMPETENCE</label>
                        </div>
                        <div class="col-sm-2">
                            <div class="input-group">
                                <input required type="number" class="form-control form-control-sm" id="competency_score" name="competency_score" min="0" max="20" value="{{ score.competency_score }}">
                                <span class="input-group-text">/20</span>
                            </div>
                        </div>
                    </div>
                </div>
                <h3 class="mt-5">{% trans 'Behavior Evaluation' %}</h3>
                <hr/>
                <div class="row">
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="behavior_1" class="form-label mb-0">RELATIONS AVEC LES PATIENTS</label>
                                <p class="form-text text-muted">contact humain – capacité d'inspirer confiance – réactions appropriées aux craintes des patients et de leur famille</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="behavior_1" name="behavior_1" min="0" max="20" value="{{ score.preconcours_evaluation_detail.behavior_1 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="behavior_2" class="form-label mb-0">RELATIONS AVEC LES MEDECINS, LE PERSONNEL</label>
                                <p class="form-text text-muted">capacité de travailler en équipe – acceptation de l'autorité et des critiques – communications avec le personnel soignant</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="behavior_2" name="behavior_2" min="0" max="20" value="{{ score.preconcours_evaluation_detail.behavior_2 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="behavior_3" class="form-label mb-0">CONSCIENCE PROFESSIONNELLE</label>
                                <p class="form-text text-muted">dévouement – ponctualité – prises de responsabilités – curiosité scientifique</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="behavior_3" name="behavior_3" min="0" max="20" value="{{ score.preconcours_evaluation_detail.behavior_3 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    <div class="col-12">
                        <div class="mb-3 row align-items-center">
                            <div class="col-sm-10">
                                <label for="behavior_4" class="form-label mb-0">ENGAGEMENT PERSONNEL DANS LE SERVICE</label>
                                <p class="form-text text-muted">participation active aux tours de salle – consultations de la littérature – préparation de staffs – initiatives constructives</p>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" class="form-control form-control-sm" id="behavior_4" name="behavior_4" min="0" max="20" value="{{ score.preconcours_evaluation_detail.behavior_4 }}">
                                    <span class="input-group-text">/20</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 bg-light  border-top border-bottom">
                    <div class="row align-items-center">
                        <div class="col-sm-10">
                            <label for="behavior_score" class="form-label mb-0">COTE DE COMPORTEMENT</label>
                        </div>
                        <div class="col-sm-2">
                            <div class="input-group">
                                <input required type="number" class="form-control form-control-sm" id="behavior_score" name="behavior_score" min="0" max="20" value="{{ score.behavior_score }}">
                                <span class="input-group-text">/20</span>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 class="mt-5">{% trans 'Comments' %}</h3>
                <hr/>
                <div class="mb-3">
                    <label for="comments" class="form-label mb-0">Soulignez les points forts et les points faibles. Justifiez votre évaluation.</label>
                    <textarea class="form-control" id="comments" name="preconcours_comments" rows="5">{{ score.preconcours_evaluation_detail.preconcours_comments }}</textarea>
                </div>

                <button type="submit" class="btn btn-primary">{% trans 'Save' %}</button>
            </form>
        </div>
    </div>
{% endblock %}
